<table class="table table-condensed">
    <tr>
        <td>Level</td>
        <td>Name</td>
        <td>
            <!--Produktionsgeschwindigkeit-->
        </td>
        <td>Produkte</td>

        <td>Kosten</td>
        <td></td>
    </tr>
    <tr ng-repeat="(bid,building) in $root.selectedPlanet.buildings"
        ng-show="uiService.showBuilding(building)"
        ng-init="utilService.merge($root.selectedPlanet.buildings,$root.settings.buildings)"
        ng-class="{'text-muted':building.level==0 && !building.upgradeDuration}">
        <!--Level-->
        <td class="text-td">{{building.level || 0}}</td>
        <!--Name-->
        <td class="text-td">{{building.name}}</td>
        <!--Geschwindigkeit-->
        <td style="padding: 4px 8px 0 8px; line-height: 1; min-width: 45px;">
            <div ng-show="building.level>0">
                <div ng-show="building.productionDuration">
                    <span class="glyphicon glyphicon-hourglass"></span>{{building.productionDuration}}
                </div>
                <div ng-show="!building.productionDuration">
                    <span class="glyphicon glyphicon-hourglass"></span>{{building.secondsForOneProductionCycle}}
                </div>
                <div ng-show="building.educts.length>0" ng-class="{'text-danger':building.educts.length>0 && !building.ordered>0}">
                    <span class="glyphicon glyphicon-cog" ng-hide="building.educts.length>0 && !building.ordered>0"></span>
                    <span class="glyphicon glyphicon-exclamation-sign" ng-show="building.educts.length>0 && !building.ordered>0"></span>
                    {{building.ordered}}
                </div>
            </div>
        </td>
        <!--Produkte-->
        <td class="square-td">
            <goodsquare ng-repeat="product in building.goodProducts" good="product" planetquant="$root.selectedPlanet.goods[product.type].quant" quant="'+'+product.quant * building.level"></goodsquare>
            <unitsquare ng-repeat="unit in building.unitProducts" unittype="unit"></unitsquare>
        </td>
        <!--Kosten-->
        <td class="square-td" style="width:100px;">
            <div ng-show="showProduce">
                <goodsquare ng-repeat="educt in building.educts" good="educt" 
                            planetquant="$root.selectedPlanet.goods[educt.type].quant" quant="'-'+educt.quant*(menge||1)"></goodsquare>
            </div>
            <div ng-show="showUpgrade" style="padding-bottom: 10px;">
                <price value="-$root.settings.buildings[building.type].buildPrice * (building.level+1)" ng-show="showUpgrade"></price>
                <br />
                <goodsquare ng-repeat="goodcost in $root.settings.buildings[building.type].buildCosts"
                            good="goodcost" planetquant="$root.selectedPlanet.goods[goodcost.type].quant" quant="-goodcost.quant*(building.level+1)"
                            ng-class="{'text-danger':$root.selectedPlanet.goods[goodcost.type].quant<goodcost.quant*(building.level+1)}"></goodsquare>
                <table class="table table-condensed text-danger" style="margin:0">
                    <tr ng-repeat="(type,level) in building.buildRequirements" ng-show="$root.selectedPlanet.buildings[type].level < level">
                        <td>{{$root.settings.buildings[type].name}}</td>
                        <td>Level {{level}}</td>
                    </tr>
                </table>
            </div>
        </td>
        <!--Produzieren-->
        <td class="btn-td">
            <div style="float: right">
                <div ng-hide="showUpgrade || showProduce || building.upgradeDuration">
                    <div ng-click="$parent.showProduce=true" ng-if="building.educts.length>0 && building.level>0" 
                         ng-class="{'btn-primary':building.ordered==0 && building.educts.length>0}"
                         class="btn btn-sm btn-default">
                        <span class="glyphicon glyphicon-cog"></span>
                        Produzieren
                    </div>
                    <div ng-click="showUpgrade=true" class="btn btn-sm btn-default">
                        <span class="glyphicon glyphicon-open"></span>
                        {{building.level==0?'Bauen':'Investieren'}}
                    </div>
                </div>
                <div class="btn-group" ng-show="showProduce" style="width: 180px;">
                    <button ng-click="planetService.orderProduct(building, menge);showProduce=false;"
                            ng-disabled="!uiService.canProduce(building, menge)"
                            class="btn btn-sm btn-default">
                        <input type="number" ng-init="menge=1" ng-model="menge" min="1" class="input-sm" ng-click="$event.stopPropagation();" />
                        Produzieren
                    </button>
                    <div class="btn btn-sm btn-default" ng-click="showProduce=false">
                        <span class="glyphicon glyphicon-remove"></span>
                    </div>
                </div>
                <div ng-show="!building.upgradeDuration">
                    <div class="btn-group" ng-show="showUpgrade && !building.upgradeDuration" style="width: 130px;">
                        <button class="btn btn-sm btn-default" ng-click="planetService.upgradeBuilding(building); showUpgrade=false;"
                                ng-disabled="!uiService.canUpgradeBuilding(building)">
                            <span class="glyphicon glyphicon-open"></span>
                            Bezahlen
                        </button>
                        <div class="btn btn-sm btn-default" ng-click="showUpgrade=false">
                            <span class="glyphicon glyphicon-remove"></span>
                        </div>
                    </div>
                </div>
                <div ng-show="building.upgradeDuration" style="margin-top:5px;">
                    <span class="glyphicon glyphicon-hourglass"></span>
                    {{building.upgradeDuration}} Sekunden zur Fertigstellung
                </div>
            </div>
        </td>
    </tr>
</table>
