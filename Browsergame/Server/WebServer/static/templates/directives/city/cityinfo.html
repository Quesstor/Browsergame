<div style="margin-bottom: 20px;">

    <table class="table table-condensed">
        <tr>
            <td class="btn-td" style="position:relative">
                <div>
                    {{city().info}}
                    <div ng-show="city().owner==$root.player.id && !editinfo" class="btn btn-xs btn-default" ng-click="editinfo=true; setinfo=city().info">
                        <span class="glyphicon glyphicon-pencil"></span>
                    </div>
                </div>
                <div ng-show="editinfo" class="hovermenu" style="min-width: 200px">
                    Planeten Name
                    <input type="text" class="form-control" ng-model="setName" placeholder="Planeten Name" maxlength="50" />                    Beschreibung
                    <textarea class="form-control" ng-model="setInfo" placeholder="Planeten Beschreibung" maxlength="500" />
                    <br>
                    <div class="btn-group btn-group-sm pull-right" ng-click="editinfo=false">
                        <button class="btn btn-primary btn-sm" ng-click="updateCityInfo(setinfo);">Speichern</button>
                        <button class="btn btn-default btn-sm"><span class="glyphicon glyphicon-remove"></span></button>
                    </div>
                </div>
            </td>
            <td>Produziert</td>
            <td>Konsumiert</td>
            <td>Generiert</td>
        </tr>
        <tr>
            <td>Insgesamt</td>
            <td>
                <itemsquare item="{type: type}" ng-repeat="(type,quant) in city().products" quant="'+'+quant" ng-if="quant>0" />
            </td>
            <td>
                <itemsquare item="{type: type}" ng-repeat="(type,quant) in city().consumes" quant="'-'+quant" ng-if="quant>0" />
            </td>
            <td>
                <price value="totalIncome().toFixed(0)"></price>
            </td>
        </tr>
    </table>
    <table class="table table-condensed">
        <tr class="notopborder">
            <td>Bevölkerung</td>
            <td>Konsumiert</td>
            <td>Generiert</td>
        </tr>
        <tr ng-repeat="(population,consumes) in city().consumesPerPopulation" ng-show="population<=city().population">
            <td>{{population}}</td>
            <td>
                <itemsquare item="{type: type}" ng-repeat="(type,quant) in consumes" quant="-quant * $root.settings.consumePerMinute"></itemsquare>
            </td>
            <td>
                <price value="$root.player.income[population].toFixed(0) || 0" />
            </td>
        </tr>
        <tr>
            <td>
                <div ng-hide="city().populationSurplus==1">{{(city().populationSurplus*100).toFixed(2)}}% bis zur nächsten Stufe</div>
                <div class="btn btn-sm btn-success" ng-show="city().populationSurplus==1" ng-click="increasePopulation()">
                    Ausbauen
                </div>
            </td>
            <td style="opacity: 0.3">
                <itemsquare item="{type: type}" ng-repeat="(type,quant) in city().consumesPerPopulation[city().population+1]" quant="- quant * $root.settings.consumePerMinute"></itemsquare>
            </td>
            <td>
            </td>
    </table>

</div>